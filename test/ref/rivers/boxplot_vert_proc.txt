
int scale_to_view_height(float value, float max_value, float min_value, int view_height)
{
  return int((value - min_value) / (max_value - min_value) * view_height);
}

void boxplot(int scaled_median, int scaled_lower_quartile, int[] scaled_lower_outliers, int scaled_upper_quartile, int[] scaled_upper_outliers, int median_size, int quartile_size, int outlier_size, int view_width, int view_height)
{
  int centerline = view_width / 2;
        		
  // draw horizontal
  line(centerline, scaled_lower_quartile, centerline, scaled_upper_quartile);

  // draw lower outliers
  for ( int i = 0; i < scaled_lower_outliers.length; i += 1 )
    line(centerline - outlier_size, scaled_lower_outliers[i], centerline + outlier_size, scaled_lower_outliers[i]);

  // draw lower quartile
  line(centerline - quartile_size, scaled_lower_quartile, centerline + quartile_size, scaled_lower_quartile);

  // draw median
  line(centerline - median_size, scaled_median, centerline + median_size, scaled_median);

  // draw upper quartile
  line(centerline - quartile_size, scaled_upper_quartile, centerline + quartile_size, scaled_upper_quartile);

  // draw upper outliers
  for ( int i = 0; i < scaled_upper_outliers.length; i += 1 )
    line(centerline - outlier_size, scaled_upper_outliers[i], centerline + outlier_size, scaled_upper_outliers[i]);
}

int view_width = 60;
int view_height = 600;

void setup()
{
  noLoop();

  size(view_width, view_height);
  noSmooth();

  background(0);
}

void draw()
{
  // settings
  int outlier_size = 5;
  int quartile_size = 10;
  int median_size = 5;
  stroke(255);

  // data
  float[] lower_outliers = {  };
  float lower_quartile = 310.0;
  float median = 425.0;
  float upper_quartile = 696.0;
  float[] upper_outliers = { 1100, 1171, 1205, 1243, 1270, 1306, 1450, 1459, 1770, 1885, 2315, 2348, 2533, 3710 };
  float max_value = 3710.0;
  float min_value = 135.0;
  int vertical_offset = 20;
  
  // scale values to ints
  int scaled_median = scale_to_view_height(median, max_value, min_value, view_height) + vertical_offset;
  int scaled_lower_quartile = scale_to_view_height(lower_quartile, max_value, min_value, view_height) + vertical_offset;
  int scaled_upper_quartile = scale_to_view_height(upper_quartile, max_value, min_value, view_height) + vertical_offset;
  int[] scaled_lower_outliers = new int[lower_outliers.length];
  for ( int i = 0; i < lower_outliers.length; i += 1 )
    scaled_lower_outliers[i] = scale_to_view_height(lower_outliers[i], max_value, min_value, view_height) + vertical_offset;
  int[] scaled_upper_outliers = new int[upper_outliers.length];
  for ( int i = 0; i < upper_outliers.length; i += 1 )
    scaled_upper_outliers[i] = scale_to_view_height(upper_outliers[i], max_value, min_value, view_height) + vertical_offset;
    
  boxplot(scaled_median, scaled_lower_quartile, scaled_lower_outliers, scaled_upper_quartile, scaled_upper_outliers, median_size, quartile_size, outlier_size, view_width, view_height);
}

